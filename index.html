<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Consulta Profissional - Protocolo TRIPE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ef4444; --bg: #050505; --card: #111111; --text: #ffffff; --muted: #9ca3af; --border: #262626; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg ); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .quiz-card { width: 100%; max-width: 450px; background: var(--card); border: 1px solid var(--border); border-radius: 24px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.6); text-align: center; }
        .fixed-header { font-size: 10px; font-weight: 900; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px; }
        .progress-bar { height: 4px; background: var(--border); border-radius: 10px; margin-bottom: 30px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s ease; }
        .question-title { font-size: 24px; font-weight: 900; margin-bottom: 15px; line-height: 1.3; }
        .options-grid { display: grid; gap: 12px; margin-bottom: 25px; }
        .option-btn { background: var(--card); border: 2px solid var(--border); color: var(--text); padding: 16px; border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .option-btn.selected { border-color: var(--primary); background: rgba(239, 68, 68, 0.2); }
        .btn-next { background: var(--primary); color: white; border: none; padding: 18px; border-radius: 12px; font-weight: 900; cursor: pointer; width: 100%; font-size: 16px; }
        .screen { display: none; }
        .screen.active { display: block; }
        .urgency-badge { background: rgba(34, 197, 94, 0.2); border: 2px solid #22c55e; padding: 10px 15px; border-radius: 50px; display: inline-block; margin-bottom: 20px; font-weight: 900; color: #22c55e; font-size: 12px; }
        .carousel { width: 100%; height: 200px; background: #000; border-radius: 15px; margin: 15px 0; overflow: hidden; position: relative; border: 1px solid var(--border); }
        .slide { position: absolute; inset: 0; opacity: 0; transition: opacity 0.6s ease; }
        .slide.active { opacity: 1; }
        .slide img { width: 100%; height: 100%; object-fit: cover; }
        .result-badge { background: var(--primary); color: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; font-weight: 900; font-size: 28px; }
        .bullet-point { display: flex; align-items: center; text-align: left; margin-bottom: 10px; font-weight: 600; }
        .bullet-icon { width: 20px; height: 20px; border-radius: 50%; margin-right: 10px; display: flex; align-items: center; justify-content: center; font-size: 12px; transition: background-color 0.5s; }
        .bullet-icon.red { background-color: var(--primary); }
        .bullet-icon.green { background-color: #22c55e; }
        .offer-box { background: rgba(239, 68, 68, 0.1); border: 2px solid var(--primary); padding: 20px; border-radius: 16px; margin-top: 20px; }
        .timer { font-size: 24px; font-weight: 900; color: #facc15; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <!-- Tela 1: Mini VSL -->
        <div id="s-0" class="screen active">
            <div class="fixed-header">PROTOCOLO TRIPE - REVELADO</div>
            <h2 class="question-title">O SEGREDO QUE OS ATORES PORNÔ NÃO QUEREM QUE VOCÊ SAIBA.</h2>
            <div style="background: #000; height: 250px; border-radius: 12px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--muted); border: 1px solid var(--border);">
                <!-- COLE SEU EMBED DE VÍDEO AQUI -->
                <p style="padding: 20px;">[VÍDEO VSL AQUI]</p>
            </div>
            <button class="btn-next" onclick="next()">CLIQUE PARA REVELAR O SEGREDO</button>
        </div>

        <!-- Tela 2: Modal de Autoridade -->
        <div id="s-1" class="screen">
            <div class="fixed-header">CONSULTA PROFISSIONAL GRATUITA</div>
            <h2 class="question-title">CLIQUE AGORA PARA FAZER SUA AVALIAÇÃO GRATUITA</h2>
            <div class="urgency-badge">
                <span id="online-count">147</span> HOMENS ONLINE AGORA
            </div>
            <div class="carousel" id="authority-carousel">
                <div class="slide active"><img src="https://metodotripe.shop/wp-content/uploads/2026/01/22109742.jpg"></div>
                <div class="slide"><img src="https://metodotripe.shop/wp-content/uploads/2026/01/meaSaaTbaAaaaamhD_iLJzfk9u2QO-ZC1.jpg"></div>
                <div class="slide"><img src="https://metodotripe.shop/wp-content/uploads/2026/01/paciente-D-antes-e-depois-alongamento-peniano-faloplastia-fotor-20260119195743.png"></div>
            </div>
            <p style="color: var(--muted ); margin-bottom: 25px;" id="loading-text">Carregando avaliação gratuita...</p>
            <button class="btn-next" onclick="next()" id="start-quiz-btn" disabled>INICIAR AVALIAÇÃO AGORA</button>
        </div>

        <!-- Tela 3: Quiz Profissional (15 Perguntas) -->
        <div id="s-2" class="screen">
            <div class="fixed-header">AVALIAÇÃO CLÍNICA - ETAPA <span id="q-num">1</span>/15</div>
            <div class="progress-bar"><div class="progress-fill" id="p-fill"></div></div>
            <div id="q-box"></div>
        </div>

        <!-- Tela 4: Processamento de Resultados -->
        <div id="s-3" class="screen">
            <div class="fixed-header">PROCESSANDO DIAGNÓSTICO</div>
            <h2 class="question-title">VALIDANDO SEU POTENCIAL DE CRESCIMENTO</h2>
            <div class="carousel" id="depo-carousel" style="height: 250px;">
                <div class="slide active"><img src="https://metodotripe.shop/wp-content/uploads/2026/01/Fotos-de-penis-grande10.jpg"></div>
                <div class="slide"><img src="https://metodotripe.shop/wp-content/uploads/2024/12/WhatsApp-Image-2024-12-18-at-15.11.46-rcl53qv1p0gr5s3fzr30gvvchnyybvpbhth13gqhj4.jpeg"></div>
            </div>
            <div id="bullet-points" style="margin-top: 20px;">
                <div class="bullet-point"><div class="bullet-icon red" id="b1">...</div> <span id="t1">CALCULANDO potencial de expansão celular...</span></div>
                <div class="bullet-point"><div class="bullet-icon red" id="b2">...</div> <span id="t2">COMPARANDO com 10.847 casos de sucesso...</span></div>
                <div class="bullet-point"><div class="bullet-icon red" id="b3">...</div> <span id="t3">VALIDANDO compatibilidade com o Protocolo TRIPE...</span></div>
            </div>
        </div>

        <!-- Tela 5: Bloco de Oferta -->
        <div id="s-4" class="screen">
            <div class="fixed-header">DIAGNÓSTICO FINAL REVELADO</div>
            <h2 class="question-title">SEU POTENCIAL É DE <span class="text-red-500" id="final-result">+5.2cm</span> EM <span class="text-red-500" id="final-days">30</span> DIAS!</h2>
            <p style="color: var(--muted ); margin-bottom: 20px;">O segredo que os atores pornô usam para manter o desempenho e tamanho está aqui.</p>
            
            <div class="offer-box">
                <p class="font-bold text-lg mb-2">ÚLTIMAS VAGAS DISPONÍVEIS!</p>
                <div class="timer" id="countdown">10:00</div>
                <p class="text-xs text-gray-400 mt-1">O contador zera em 10 minutos.</p>
            </div>

            <div style="text-align: left; margin-top: 20px;">
                <p class="font-bold mb-2">BÔNUS EXCLUSIVOS INCLUSOS:</p>
                <ul style="list-style: none; padding: 0; font-size: 14px;">
                    <li style="display: flex; align-items: center; margin-bottom: 8px;"><span style="color: #22c55e; margin-right: 8px;">✓</span> Guia de Rigidez Máxima (E-book)</li>
                    <li style="display: flex; align-items: center; margin-bottom: 8px;"><span style="color: #22c55e; margin-right: 8px;">✓</span> Acesso ao Grupo VIP de Suporte</li>
                    <li style="display: flex; align-items: center; margin-bottom: 8px;"><span style="color: #22c55e; margin-right: 8px;">✓</span> Tabela de Acompanhamento de Medidas</li>
                </ul>
            </div>

            <button class="btn-next" onclick="finish()" style="margin-top: 25px;">GARANTIR MEU ACESSO AGORA</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, update, get, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // CONFIGURAÇÕES
        const totalQuestions = 15;
        const checkoutUrl = "https://pay.wiapy.com/w-SEU_PRODUTO"; 
        const firebaseConfig = {
            apiKey: "SUA_API_KEY",
            authDomain: "novo-funil-tripe.firebaseapp.com",
            databaseURL: "https://novo-funil-tripe-default-rtdb.firebaseio.com",
            projectId: "novo-funil-tripe",
            storageBucket: "novo-funil-tripe.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID"
        };

        const QUESTIONS = [
            { id: 'idade', t: 'Qual sua faixa etária? (Fator de risco vascular )', o: ['18-25', '26-35', '36-45', '46-55', '55+'] },
            { id: 'rigidez', t: 'Com que frequência você atinge rigidez máxima?', o: ['Quase nunca', 'Raramente', 'Às vezes', 'Frequentemente', 'Sempre'] },
            { id: 'manutencao', t: 'Consegue manter a ereção até o final do ato?', o: ['Tenho muita dificuldade', 'Às vezes falha', 'Sim, sem problemas'] },
            { id: 'matinal', t: 'Você acorda com ereção matinal?', o: ['Nunca', 'Raramente', 'Quase todos os dias'] },
            { id: 'circulacao', t: 'Sente as extremidades (mãos/pés) frias com frequência?', o: ['Sim, constantemente', 'Às vezes', 'Não'] },
            { id: 'historico', t: 'Você tem histórico de Diabetes ou Pressão Alta?', o: ['Sim, ambos', 'Sim, um deles', 'Não'] },
            { id: 'tamanho', t: 'Você percebeu alguma redução no tamanho ao longo dos anos?', o: ['Sim, visível', 'Talvez um pouco', 'Não'] },
            { id: 'estresse', t: 'Qual seu nível de estresse diário?', o: ['Muito alto', 'Alto', 'Moderado', 'Baixo'] },
            { id: 'sono', t: 'Quantas horas de sono de qualidade você tem?', o: ['Menos de 5h', '5-6h', '7-8h', 'Mais de 8h'] },
            { id: 'libido', t: 'Como você avalia seu desejo sexual (libido)?', o: ['Muito baixo', 'Baixo', 'Normal', 'Alto'] },
            { id: 'vicios', t: 'Você fuma ou consome álcool em excesso?', o: ['Sim, ambos', 'Sim, um deles', 'Não'] },
            { id: 'medicamentos', t: 'Faz uso contínuo de algum medicamento?', o: ['Sim', 'Não'] },
            { id: 'exercicio', t: 'Qual sua frequência de exercícios físicos?', o: ['Nunca', '1-2x/semana', '3-4x/semana', 'Diariamente'] },
            { id: 'recuperacao', t: 'Quanto tempo leva para ter uma segunda ereção?', o: ['Mais de 1 hora', '30 minutos', '10-20 minutos', 'Quase imediato'] },
            { id: 'prioridade', t: 'Resolver este problema é sua prioridade máxima?', o: ['Sim, urgente', 'Sim, mas posso esperar', 'Apenas curiosidade'] }
        ];

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const sid = 's_' + Date.now() + Math.random().toString(36).substr(2, 5);

        let step = 0, qIdx = 0, stepStartTime = 0, avgHesitation = 0, hesitationCount = 0;

        window.next = () => {
            if (step === 0) { step = 1; update(ref(db, 'sessions/'+sid), { status: 'modal_clicked', lastUpdate: serverTimestamp() }); startModalDelay(); }
            else if (step === 1) { step = 2; update(ref(db, 'sessions/'+sid), { status: 'quiz_started', lastUpdate: serverTimestamp() }); }
            else if (step === 2) { if (qIdx < totalQuestions - 1) { qIdx++; } else { step = 3; startProcessing(); } }
            render();
        };

        window.sel = (id, val) => {
            const hesitation = Date.now() - stepStartTime;
            avgHesitation = (avgHesitation * hesitationCount + hesitation) / (hesitationCount + 1);
            hesitationCount++;
            update(ref(db, 'sessions/'+sid), { [id]: val, lastUpdate: serverTimestamp(), currentStep: qIdx + 1, avgHesitation: avgHesitation });
            window.next();
        };

        window.finish = () => { 
            update(ref(db, 'sessions/'+sid), { status: 'checkout_clicked', lastUpdate: serverTimestamp() }); 
            window.location.href = `${checkoutUrl}?utm_source=${sid}&external_id=${sid}`; 
        };

        function render() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('s-' + step).classList.add('active');
            if (step === 2) {
                const q = QUESTIONS[qIdx];
                document.getElementById('q-num').textContent = qIdx + 1;
                document.getElementById('p-fill').style.width = ((qIdx+1)/totalQuestions*100) + '%';
                document.getElementById('q-box').innerHTML = `<div class="question-title">${q.t}</div><div class="options-grid">${q.o.map((o, i) => `<button class="option-btn" onclick="sel('${q.id}', ${i})">${o}</button>`).join('')}</div>`;
                stepStartTime = Date.now();
            }
        }

        function startModalDelay() {
            let sIdx = 0; const slides = document.querySelectorAll('#authority-carousel .slide');
            const interval = setInterval(() => { slides.forEach(s => s.classList.remove('active')); sIdx = (sIdx + 1) % slides.length; slides[sIdx].classList.add('active'); }, 2000);
            setTimeout(() => { clearInterval(interval); document.getElementById('loading-text').textContent = "Avaliação carregada!"; document.getElementById('start-quiz-btn').disabled = false; }, 5000);
        }

        function startProcessing() {
            let sIdx = 0; const slides = document.querySelectorAll('#depo-carousel .slide');
            const interval = setInterval(() => { slides.forEach(s => s.classList.remove('active')); sIdx = (sIdx + 1) % slides.length; slides[sIdx].classList.add('active'); }, 2000);
            setTimeout(() => { document.getElementById('b1').className = 'bullet-icon green'; document.getElementById('t1').textContent = "POTENCIAL VALIDADO!"; }, 2000);
            setTimeout(() => { document.getElementById('b2').className = 'bullet-icon green'; document.getElementById('t2').textContent = "COMPATIBILIDADE CONFIRMADA!"; }, 4000);
            setTimeout(() => { document.getElementById('b3').className = 'bullet-icon green'; document.getElementById('t3').textContent = "PROTOCOLO COMPATÍVEL!"; }, 6000);
            setTimeout(() => { clearInterval(interval); step = 4; startCountdown(); render(); }, 8000);
        }

        function startCountdown() {
            let time = 600;
            const interval = setInterval(() => {
                const m = String(Math.floor(time / 60)).padStart(2, '0');
                const s = String(time % 60).padStart(2, '0');
                document.getElementById('countdown').textContent = `${m}:${s}`;
                if (time-- < 0) clearInterval(interval);
            }, 1000);
        }

        function init() { render(); set(ref(db, 'sessions/'+sid), { enteredAt: serverTimestamp(), status: 'vsl_viewed', currentStep: 0 }); }
        init();
    </script>
</body>
</html>
